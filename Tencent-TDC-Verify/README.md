Tencent TDC 破解
=====================================================================================================================================

本项目针对 https://dj.captcha.qq.com/tdc.js 的破解。

仅用于学习交流，未改动原JS文件内部任何内容，**仅添加增量JS内容完成破解**，实现真正意义上的完整破解。

本破解不包括图像识别，即滑块坐标的识别（自行用色差法或对比法即可）。

tdc.js采用动态混淆的方式，每次加载的JS文件均不相同，且几乎没有重复。当然这可以用charles来进行一些基础调试，这在破解在初级阶段时很有必要。

大致思路
-------------------------------------------------------------------------------------------------------------------------------------
    i.  通过接管window对象及劫持一部分函数达到完全自定义输出collectdata。
    ii. 包括不限于模拟浏览器环境，构建window、document、navigator等对象，自定义并劫持addEventListener、Promise和Date
    等对实时结果造成影响的函数等操作进行破解。

具体实现
-------------------------------------------------------------------------------------------------------------------------------------
    1、init。模拟浏览器对象环境，使JS可直接运行并导出window["TDC"]对象，其包含四个方法，setData、getData、clearTc和getInfo。
    
    2、listener。该JS为闭包实现，通过addEventListener函数push轨迹相关处理函数，addEventListener(type,listener,option)
       函数type为事件名称，listener为处理函数。将多个不同的type和listener压入数组，并在合适的时机进行模拟操作，如mousemove。
       通过模拟Event对象，进行listener(Event)，同时劫持Date函数，使得事件触发函数获取到的时间戳与预设的时间戳一致，
       达到破解轨迹、坐标（即mousedown、mouseup、mousemove等事件）。
           
    3、setData
    
    4、getData
调试过程
-------------------------------------------------------------------------------------------------------------------------------------
    1、最后版本使用较新V8引擎运行，具体可上Google自行编译DLL。弃用windows JScript组件
    2、[TDCJS]用https://dj.captcha.qq.com/tdc.js源码替换
    3、闭包调试，防止污染。将整份JS改作闭包，这样自定义函数、对象才能在浏览器下有效！调试用谷歌Chrome，不用赘述。
